# 父传子

1. 父组件传输数据，子组件标签身上绑定属性，如`<Son xxx={xxx} />`
2. 子组件接收数据，通过`props`的参数去接收
3. 想渲染props接收到的数据，可以使用`{props.xxx}`

```
function Son(props){//子组件
  console.log(props)
  return(
    <div>
    this is son,{props.name}
    </div>
  )
}

function Father(){//父组件
  const name = "this is father"
  return(
    <div>
    <Son name={name} />
    </div>
  )
}

export default Father
```

![](https://cdn.nlark.com/yuque/0/2025/png/55421216/1745216844126-9c787738-d761-4f3d-9f5e-2d0112c4589a.png)

![](https://cdn.nlark.com/yuque/0/2025/png/55421216/1745216855570-2c1fb150-5de3-4f25-9974-0f46a2321697.png)

## props

1. 可以传递任意的数据：数字，字符串，布尔值，数组，对象，函数，JSX
2. props是**只读对象**，子组件只能读取props中的数据，不能直接进行修改，父组件的数据只能由父组件修改，否则会报错

## 特殊的prop children

1. 当我们把内容嵌套在子组件标签中时，父组件会自动在名为`children`的prop属性中接收该内容
2. 将`<Son />`改为`<Son></Son>`
3. 要渲染嵌套的子标签，可以使用`{props.children}`

```
function Son(props){
    console.log(props)
    return <div>this is son,{props.children}</div>
}
function Father(){
    const name = "this is father"
    return(
        <div>
            <Son>
                <span>this is span</span>
            </Son>
        </div>
    )
}

export default Father
```

![](https://cdn.nlark.com/yuque/0/2025/png/55421216/1745217985722-0bf29a66-7079-49c2-865a-b341de4d445b.png)

![](https://cdn.nlark.com/yuque/0/2025/png/55421216/1745217997237-1ee8ea06-6ab6-4532-88c3-9cb725ed53ca.png)

# 子传父

1. 核心思路：在子组件中调用父组件中的函数并传递参数

```
function Son({onGetMsg})
{
    const sonMsg = 'this is son msg'
    return(
        <div>
            <button onClick={() => onGetMsg(sonMsg)}>send</button>
        </div>
    )
}

function Father(){
    const getMsg = (msg) => {
        console.log(msg)
    }
    return(
        <div>
            <Son onGetMsg = {getMsg} />
        </div>
    )
}

export default Father
```

![](https://cdn.nlark.com/yuque/0/2025/png/55421216/1745218719003-2137f9ab-e3c8-40fa-b58e-68972e42fc1a.png)

![](https://cdn.nlark.com/yuque/0/2025/png/55421216/1745218759544-b8bb2beb-9395-48d2-97a0-8e5699112e3c.png)

# 兄弟组件通信

- 借助“状态提升”机制，通过父组件进行兄弟组件之间的数据传输

- _A组件_先通过数据传输把数据传给_父组件_

- 在_子组件_中调用函数并传递参数（onclick将A中的数据`name`传给`onGetAName`）

- _父组件_拿到数据后通过父传子的方式再传递给B组件

- _父组件_接收到数据，并运行了`getAName`，向控制台传输了`name`的数据，使用`setName(name)`修改了_B组件_中的`name`

```
import React,{useState} from 'react'
function A({onGetAName})
{
    const name = 'this is A'
    return(
        <div>
            this is A compnent
            <button onClick={() => onGetAName(name)}>send</button>
        </div>
    )
}

function B({name}){
    return(
        <div>
            this is B compnent
            {name}
        </div>
    )
}
function Father(){
    const [name,setName] = useState('')
    const getAName = (name) => {
        console.log(name)
        setName(name)
    }
    return(
        <div>
            this is father
            <A onGetAName = {getAName}/>
            <B name = {name}/>
        </div>
    )
}
export default Father
```

![](https://cdn.nlark.com/yuque/0/2025/png/55421216/1745219888751-1df79c15-18cd-41b5-ae98-20d0a0fc905c.png)

![](https://cdn.nlark.com/yuque/0/2025/png/55421216/1745220292612-ec0fb5d6-decb-4e8f-ab6d-bf8903c066b1.png)

# 跨层级组件通信

1. 使用`createContext`方法创建一个上下文对象`Ctx`
2. 在顶层组件中通过`Ctx.Provider`组件提供数据
3. 在底层组件中通过`useContext`钩子函数获取消费数据

```
import React,{ createContext, useContext } from 'react'//需要引入的方法
const MsgContest = createContext()
function A({onGetAName})
{
    const name = 'this is A'
    return(
        <div>
            this is A compnent
            <B />
        </div>
    )
}

function B(){//底层组件
    const msg = useContext(MsgContest)
    return(
        <div>
            this is B compnent,
            {msg}
        </div>
    )
}
function Father(){//顶层组件
    const msg = 'this is ffather'
    return(
        <div>
            <MsgContest.Provider value = {msg}>
                this is ffather
                <A />
            </MsgContest.Provider>
        </div>
    )
}
export default Father
```