### 分类
- 异常对象是派生于Throwable类的一个实例
![[Pasted image 20251031205754.png]]
#### Error
- Java运行时系统的内部错误和资源耗尽错误
- 不应该抛出这种异常
#### RuntimeException
- 由编程错误导致的异常（也就是说如果出现RuntimeException，则一定是程序员的错误）
- 例如强制转换错误，数组越界，访问null等
- 而像超越文件末尾读数据、打开不存在文件、类不存在这类不是代码问题，而是环境问题
#### IOException
- 程序本身没有问题，而I/O错误
#### 非检查型 & 检查型：
- 如Error，RuntimeException及其派生为非检查型
- 其余的所有异常都为检查型（需要提供异常处理器）
### 基本语法
#### 抛出异常
```java
String fun() throws EOFException
{
	...
	throw new EOFException();
	...
}
```
- 这里的EOFException相当于一个异常类的构造器，如果有相对应构造方法可以传值
- 一但抛出异常，该方法就不会返回到调用者
#### 构建异常类
```java
class FileFormatException extends IOException
{
	public FileFormatException() { }//空构造器
	public FileFormatException(String gripe) 
	{
		super(gripe);//将参数传给IOException
	}
}
```
#### 捕获异常：try/catch语句块
```java
try {
    int a = 1 / 0;
    ...
} 
catch (ArithmeticException e) {
    System.out.println("出错啦：" + e.getMessage());
}
catch (UnknownHostException e | FileNotFoundException e) {//相同动作可放一块
    System.out.println("出错啦：" + e.getMessage());
}
```
- 如果try语句块中的代码没有抛出任何异常，则跳过catch语句
#### 再次抛出 & 异常链
```java
try {
    readFile("config.json");
} catch (IOException e) {
    throw new RuntimeException("读取配置文件失败", e);
}
```
- 就是异常套娃
- 获取原始异常：
```java
try {
    try {
        throw new IOException("IO出错啦");
    } catch (IOException e) {
        throw new FileFormatException("文件格式异常", e);
    }
} catch (FileFormatException e) {
    System.out.println("外层异常: " + e);
    Throwable root = e.getCause();
    System.out.println("原始异常: " + root);
}

```
- 包装成运行异常
```java
try {
    readFile("a.txt");
} catch (IOException e) {
    throw new RuntimeException(e); // 包装成运行异常
}
```
#### finally子句
- 目的：收尾工作
- 无论是否发生异常都要执行
```java
try{
	try{
		code...
	}
	catch{
		...//处理语句
	}
	finally{
		in.close();
	}
}
```
