- 什么是[[概念/计算机网络/基本概念/应用层/进程通信#套接字|套接字]]？
### [[UDP]][[套接字]]编程
![[Pasted image 20251006150257.png]]
#### 客户端
```python
# 客户端
from socket import *

servername = 'localhost'
serverport = 12000 # 服务器端口号

# 创建UDP套接字，AF_INET：使用IPv4，SOCK_DGRAM：UDP协议
clientSocket = socket(AF_INET, SOCK_DGRAM)

# 向目的主机发送提示（message）和目的地址（servername, serverport）
message = input('Input lowercase sentence:')
clientSocket.sendto(message.encode(), (servername, serverport))

# 接收服务器发回的消息（modifiedMessage, serverAddress分别表示数据，源地址），2048表示接收的最大字节数
modifiedMessage, serverAddress = clientSocket.recvfrom(2048)

#将字节报文转换成字符串，从用户显示器打印出来（modifiedMessage）
print(modifiedMessage.decode())

clientSocket.close() # 关闭套接字和进程（UDP无连接）
```
#### 服务器端
```python
# 服务器
from socket import *

serverPort = 12000 # 服务器端口号
# 创建套接字，使用IPv4和UDP协议
serverSocket = socket(AF_INET, SOCK_DGRAM)

# 将服务器绑定到指定端口
serverSocket.bind(('', serverPort))
print("The server is ready to receive") # 表示服务器已启动

# 循环接收数据
while True:
    # 数据放入message，客户端地址放入clientAddress
    message, clientAddress = serverSocket.recvfrom(2048)
    # 将收到的消息转换为大写，验证数据的收发流程是通的。
    modifiedMessage = message.decode().upper()
    # 将处理后的消息发回给客户端
    serverSocket.sendto(modifiedMessage.encode(), clientAddress)
```
### [[TCP]]套接字编程
![[Pasted image 20251006150329.png]]
#### 客户端
```python
# 客户端
from socket import *

serverName = 'Localhost'
serverPort = 12000

# 创建TCP套接字，AF_INET：使用IPv4，SOCK_STREAM：TCP协议
clientSocket = socket(AF_INET, SOCK_STREAM)

# 连接服务器，建立三次握手，将服务器地址和端口号作为参数
clientSocket.connect((serverName, serverPort))

# 进入TCP连接向服务器发送数据
sentence = input('Input lowercase sentence:')
clientSocket.send(sentence.encode())
  
# 接收服务器发回的数据并打印
modifiedSentence = clientSocket.recv(1024)
print('From Server:', modifiedSentence.decode())

# 关闭套接字和进程，同时关闭连接
clientSocket.close()
```
#### 服务器端
```python
# 服务器
from socket import *

serverPort = 12000 # 服务器端口号

# 创建套接字，使用IPv4和TCP协议
serverSocket = socket(AF_INET, SOCK_STREAM)

# 将服务器绑定到指定端口
serverSocket.bind(('', serverPort))
print("The server is ready to receive")

# 循环接收数据
while True:
    # 监听连接，等待客户端连接，参数表示连接队列的最大长度
    serverSocket.listen(1)
    # 接受客户端连接，完成握手（两次accept）
    connectionSocket, clientAddress = serverSocket.accept()
    # 接收客户端发来的数据
    sentence = connectionSocket.recv(1024).decode()
    # 将收到的消息转换为大写并发回送给客户端，验证数据的收发流程是通的。
    capitalizedSentence = sentence.upper()
    connectionSocket.send(capitalizedSentence.encode())
    # 关闭与客户端的连接
    connectionSocket.close()
```
