---
aliases:
  - MSS
  - 最大报文长度
---
> 作用层次：运输层
### 设置与长度
- 根据本地发送主机发送的[[MTU]]（最大链路层帧长度）设置，是[[TCP]] 连接建立（三次握手）时协商出来的
>	在三次握手的 **SYN 报文** 中，TCP 头部的 **选项字段（Options）** 里会带上 MSS 值，实际 MSS 会取双方协商的 **较小值**
- 要求保证一个TCP报文段加上TCP/IP首部长度（一般为40）将适合单个链路层帧
- MSS 限制的是一段 TCP 数据报中，负载（不包括 TCP/IP 头）的最大字节数，即MSS = MTU - TCP/IP头
- 如果没有 MSS 限制，发送方可能发太大的 TCP 报文，结果 IP 层不得不进行 **分片（fragmentation）**，而 IP 分片非常容易出错或丢失，效率也低。
### 与窗口大小、拥塞控制的关系
MSS 会影响 TCP 的 0很多性能参数：
- **发送窗口（Window Size）** 是以字节为单位的；
- **慢启动、拥塞避免** 等算法的“步长”也往往以 MSS 为基准。
所以：
> MSS 越大，理论上传输效率越高，但丢包代价也越大；MSS 越小，可靠性更高但效率下降。

