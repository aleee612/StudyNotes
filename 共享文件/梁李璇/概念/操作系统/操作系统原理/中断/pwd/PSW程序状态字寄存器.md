---
aliases:
  - PSW
  - 程序状态字
---
##### 别名：
- CPU 状态寄存器
### 作用
- 判断当前应该进入哪个状态（用户态，内核态）并告诉os（特权指令）
- 控制指令执行顺序

---
### 主要内容
#### 状态标志位
| 位   | 含义         |
| --- | ---------- |
| ZF  | 结果是否为 0    |
| SF  | 符号位（正负）    |
| CF  | 进位 / 借位    |
| OF  | 有符号溢出      |
| PF  | 奇偶校验       |
| AF  | 辅助进位（历史遗留） |
- 实现 if / while / jcc
#### 控制标志位
| 位               | 含义                 |
| --------------- | ------------------ |
| [[IF中断允许位\|IF]] | 是否允许外部中断（你刚问过的老熟人） |
| DF              | 字符串指令方向（++ 还是 --）  |
| TF              | 单步调试（debug 用）      |
- CPU 行为开关
#### 系统 / 特权相关
|位|含义|
|---|---|
|IOPL|I/O 特权级|
|NT|任务嵌套|
|VM|虚拟 8086|
|RF|恢复标志|
- 只有在**内核态**（高特权级）下才能被“修改或生效”，
- 用户态要么看不见，要么动不了，就算动了也白动。

--- 
### 操作系统中的具体实现：
| 名称     | 位宽   | 出现时代        |
| ------ | ---- | ----------- |
| FLAGS  | 16 位 | 8086（远古）    |
| EFLAGS | 32 位 | 80386（32 位） |
| RFLAGS | 64 位 | x86-64      |
