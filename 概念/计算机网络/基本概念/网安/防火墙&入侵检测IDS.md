---
aliases:
  - 防火墙
  - IDS
  - 入侵检测
---

## 防火墙
- 硬件和软件的结合体
- 将一个机构的内部网络与整个因特网隔开，允许一些数据分组通过而阻止另一些分组通过
### 目标：
1. 从外到内和从内到外的所有流量都经过防火墙
2. 仅被授权的流量允许通过
3. 防火墙自身免于渗透
### 分类：
#### 传统分组过滤器（网络层）
##### 过滤决定因素
>IP源或目的地址
>在IP数据报中的协议类型字段（TCP，UDP -> 传输层；[[因特网控制报文协议ICMP|ICMP]]，OSPF ->网络层）
>TCP/UDP的源或目的端口
>TCP标志比特：SYN，ACK等
>[[因特网控制报文协议ICMP|ICMP]]报文类型
>数据报离开和进入网络的不同规则
>对不同路由器接口的不同规划
##### 实现
- 路由器中使用访问控制列表实现防火墙规则，每个路由器接口有自己的列表‘
##### 特性
- 又叫 **无状态包过滤**，是最早期的防火墙类型
- 只检查**单个数据包**的头部信息（如源/目的 IP、端口、协议、方向等）。
- **不记得之前的通信状态**，所以每个包都被当成独立的。
- 过滤规则像一张表，每个包来都逐条匹配，**不看前因后果**。
#### 状态过滤器（网络层+运输层）
- 也叫 **有状态包过滤防火墙**。
##### 特性
- 能**记住连接的状态信息**（比如 TCP 三次握手、会话是否建立、是否已关闭）。
- 会维护一个**状态表（state table）**，记录每个连接的状态。
- 新包到来时，会检查是否属于已建立连接或已允许会话。
#### 应用程序网关（应用层）
- 又名**代理防火墙**（不直接处理单个网络层的包，所以不是包过滤）
- 接触协议：HTTP，FTP，SMTP等应用层协议
##### 作用
- 检查应用层数据内容（比如 HTTP 请求头、URL、邮件内容）；
- 对内容做策略判断；
- 再决定放行、拦截或修改请求。
## IDS & IPS（统称IDS）
### 深度分组检查
- 即查看首部字段以外部分，深入查看分组携带的实际应用数据
- 应用程序网关经常做深度分组检查
### IDS：入侵检测系统
- 观察潜在的恶意流量时能产生*告警*
### IPS：入侵防止系统
- *滤除*可疑流量的设备
### 检测的攻击
- 网络映射
- 端口扫描
- TCP栈扫描
- Dos带宽泛洪攻击
- 蠕虫和病毒
- 操作系统脆弱性攻击
- 应用程序脆弱性攻击
