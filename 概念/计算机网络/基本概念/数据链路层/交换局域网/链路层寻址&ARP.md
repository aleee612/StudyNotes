---
aliases:
  - ARP
  - MAC
  - 链路层寻址
  - LAN地址
  - 物理地址
---
### MAC地址
- 又名LAN地址，物理地址
- 网络适配器具有的链路层地址
- 主机和路由器都有与网络适配器相关联的链路层地址，但交换机并不具有（其实是有的，只不过一般被忽视）。因为交换机的传输是透明的，主机/路由器不需要明确到底传给哪个交换机
#### 结构
- 6字节，共$2^{48}$ 个（挺多的，不太可能被用尽），使用十六进制表示
- 形如：`2C-66-AB-90-75-B1`
- 一般被设计为永久，但也可通过软件改变
- 公司在申请地址的时候会得到前3个字节（24位）的厂商标识符OUI，由此可见每次可得 $2^{24}$ 个地址
#### 与IP的差异
- IP为动态分配，即每一次连接上网都有可能得到不同的IP；而MAC与适配器绑定，无论在哪都不会变
- IP地址具有层次结构（子网，局域网，广域网等）；而MAC地址为扁平结构
- 一块适配器可以接收到一个并非向它寻址的帧，此时需检查该帧中的目的MAC是否与自己匹配
#### 特殊MAC地址：广播地址
- FF-FF-FF-FF-FF-FF：向局域网的所有其他适配器广播帧
### ARP协议
- 取在相同局域网上的任何IP地址作为输入，然后返回MAC地址
- （即IP -> MAC）
- ARP只为同一个子网上的主机和路由器接口解析IP地址
- 为即插即用协议，不需要管理员配置
#### 工作方式：ARP表
- 存放位置：主机或路由器内存中
- 示例：![[Pasted image 20251028214038.png]]
- TTL：从表中删除每个映射的时间（一般过期时间为20分钟）
- 不像IP路由表，ARP表中不会包含所有的主机/路由器端口的所有MAC映射
#### 工作流程：
1. 发送方构建一个称为ARP分组的特殊分组（ARP查询分组），有包括发送和接收IP地址以及MAC地址的字段
2. 当ARP表中并无该IP地址的MAC地址映射时，发送方使用MAC广播地址发送这个分组
3. 所有的适配器都接收到并传给ARP模块，但只有IP地址相对应的那个做出回复（ARP响应分组，和ARP查询分组有同样的字段）
4. 查询主机接收并更新其ARP表