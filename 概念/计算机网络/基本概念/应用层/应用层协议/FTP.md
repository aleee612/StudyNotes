---
aliases:
  - 文件传输协议
---
- 使用运输层协议：[[运输服务（协议）|TCP]]
- 由于有分离的控制连接，所以称FTP控制信息为带外传送
- 扩展：[[NFS]] 
### 控制连接与数据连接
#### 控制连接
- 服务器监听端口：21
- 作用：传输控制信息，如连接请求，传送请求
- 长期保持，不会因为文件传输结束而关闭
#### 数据连接
- 作用：实际的数据传送（文件）
- 临时，传完文件就断
- 默认：主动模式
- 所以FTP是有连接的
###### 主动模式PORT
- 发起方：服务器
- 服务器监听端口：20
- 客户端随机开放端口，发送PORT命令告知服务器
	-> 服务器接收并通过20端口与客户端口连接
###### 被动模式PASV
- 发起方：客户端
- 服务器监听端口：随机
- 客户端随机开放端口，发送PASV命令告知服务器
	-> 服务器接收并开放随机端口，告知客户
	-> 客户发起连接至服务器端口
### 安全性
- 不安全：在传输过程中使用明文传输用户名、密码和数据
- 优化：
	- **SFTP**：基于 SSH 的文件传输协议，加密传输数据。
	- **FTPS**：基于 SSL/TLS 的 FTP，加密传输数据。
### 请求用户
- Real：
	- 独立登录权限
	- 可以访问自己的主目录，并可以执行各种文件操作（如上传、下载、删除等）
	- 最高权限
- Guest：
	- 权限受限
	- 只能访问自己的主目录，并且可能无法执行某些文件操作（如删除或重命名）
	- 权限和操作范围由FTP服务器管理员进行配置和限制，以增加服务器的安全性
- Anonymous：
	- 未注册但允许访问公开资源（匿名）
	- 使用“anonymous”作为用户名，并提供一个有效的电子邮件地址作为密码进行登录
	- 可以访问服务器上的公共目录和文件，但权限和操作范围受到限制