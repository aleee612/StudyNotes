---
aliases:
  - HTTP
  - Web
---

## Web
- 万维网，一个因特网应用
#### Web 页面（Web Page）
- 也叫文档
- 由对象构成，一个对象是一个文件（html，jpeg等）
- 对象可以通过一个URL地址寻址
- 有一个HTML基本文件+几个引用对象
- HTML基本文件通过对象的URL地址引用页面中的其他对象
#### URL
- 结构：存放对象的服务器主机名 + 对象路径名
#### Web浏览器（Web browser）
- 实现了HTTP的客户端（e.g：IE，火狐）
#### Web服务器（Web server）
- 实现了HTTP的服务器端（e.g：Apache，Microsoft Internet Information Server）
- 用于存储Web对象
### 作用
- 定义Web客户向Web服务器请求Web页面的方式，服务器向客户传送Web页面方式
- 点击一个超链接 -> 浏览器向服务器发出对该页面对象的HTTP请求报文 -> 服务器接收请求 -> 服务器发送包含对象的HTTP响应报文
### 运输服务（协议）：[[运输服务（协议）#TCP服务|TCP]]
- 运行步骤：
	1. 客户端发起一个与服务器的[[TCP]]连接 -> 通过[[概念/计算机网络/基本概念/应用层/进程通信#套接字|套接字]]接口访问TCP
	2. 客户端进程/服务器进程通过[[套接字]]访问TCP -> 接收/发送响应报文
- 优点：不必担心数据丢失，也不必关注从数据丢失和乱序故障中恢复的细节
- HTTP服务器不保存关于客户的任何信息 -> HTTP是一个[[无状态协议]]
## HTTP
- 超文本传输协议
- Web的核心
- 是否有连接：否
### 三次握手
![[Pasted image 20250930085857.png]]
##### 步骤
- 客户向服务器发送一个小TCP报文段
- 服务器用一个小TCP报文段做出确认和响应
- 客户向服务器返回确认（同时发送HTTP请求报文）
##### 消耗时间
- 前两个部分占用一个[[往返时间（RTT）]]
- 后一个部分是半个RTT
- 所以总共为1.5个RTT
### 持续性
#### 非持续性链接的HTTP（如HTTP/1.0）
- 步骤
	1. HTTP客户进程在端口80（HTTP默认端口）发起一个到服务器的TCP连接
	2. 客户经[[概念/计算机网络/基本概念/应用层/进程通信#套接字|套接字]]向服务器发送HTTP请求报文
	3. 服务器接收，从其存储器（RAM/磁盘）中检索出对象，在一个HTTP响应报文中封装对象，并通过[[概念/计算机网络/基本概念/应用层/进程通信#套接字|套接字]]其向客户发送响应报文
	4. TCP确认客户已经完整收到响应报文，服务器进程通知TCP断开该TCP连接
	5. 服务器客户接收响应报文，TCP连接关闭，客户端从响应报文中提取出装有HTML对象的文件，检查HTML文件，得到JPEG对象的引用
	6. 对每个JPEG对象重复步骤1234
- 由此可见，每一次的TCP连接都只传输一个对象
- HTTP与用户如何解释一个Web页面毫无关系，这是浏览器的活
- 总响应时间是两个RTT + 服务器在存储器中检索封装对象的时间
- 缺点
	1. 必须为每一个请求的对象建立新连接，因此服务器/客户需要每次都分配TCP的缓冲区和保持TCP变量，造成负担
	2. 每一个对象经受2RTT+的时延，费时
#### 持续性连接的HTTP（如HTTP/1.1）
- 服务器发送响应后保持TCP连接打开，后续的请求/报文能够通过相同的连接进行传送
- 一条连接经过一定时间间隔（可配置）仍未被使用，服务器就关闭连接
### 报文格式
#### 请求报文
![[Pasted image 20250930092410.png]]
- 一个请求报文至少为一行
- 第一行：请求行，包含方法字段，URL字段，HTTP版本字段
	- 方法字段：[[GET]], [[POST]], HEAD, PUT, DELETE，大多请求报文使用[[GET]]
	- URL：请求的对象标识（对象URL）
- 第二行+：首部行
	- `Host`：服务器主机位置
	- `Connection`：是否持续
	- `User-agent`：使用的什么用户代理（浏览器）
	- `Accept-language`：得到什么语言版本（如果服务器中由该对象）
![[Pasted image 20250930093615.png]]
- 使用[[GET]]时实体体为空，使用[[POST]]时才使用
#### 响应报文
![[Pasted image 20250930120210.png]]
- 初始状态行：包含协议版本，状态码，短语（相应状态信息，例如是否请求成功）
- 首部行：
	- `Connection`：非持续
	- `Date` ：响应报文发送时间
	- `Server`：由哪台服务器产生，类似请求报文中的`User-agent`
	- `Last-Modified`：对象创建or最后修改时间，对于对象缓存来说非常重要
	- `Content-Length`：对象字节数
	- `Content-Type`：对象类型（不用扩展名来指示）
![[Pasted image 20250930204501.png]]
- [[常见状态码及其短语]]
### 安全性
- TCP本身安全性：[[可靠数据传输原理]]  
- 扩展https：[[SSL]] 