---
aliases:
  - 系统调用指令
---
- 作用：**让 CPU 从用户态切换到内核态**，执行一段受保护的内核代码（系统调用）。
### 称呼由来
“访问管理程序” → 访管  
管理程序 = 内核/操作系统核心部分
所以访管指令 = “访问操作系统的指令”。
### 不同架构中的访管指令
| 架构         | 访管指令名字（系统调用指令）             |
| ---------- | -------------------------- |
| **x86**    | `int 0x80`（旧）、`syscall`（新） |
| **ARM**    | `SVC`（Supervisor Call）     |
| **RISC-V** | `ecall`                    |
| **MIPS**   | `syscall`                  |
### 与Linux中sudo的关系
- 第一步：sudo 读取 /etc/sudoers
	需要文件 I/O → **系统调用**（访管一次）
- 第二步：验证用户密码
	又是 I/O → **系统调用**（访管一次）
- 第三步：切换到 root 身份
	核心：sudo 使用 **setuid(0)** 系统调用，就是 _切换到 root UID（0）_ 的操作
	setuid 是真正的“提权”，而调用它需要执行访管指令 → 内核态 → 修改进程凭证 → 返回用户态
- 第四步：执行你输入的指令
	调用 `execve()` → 又是 **系统调用** → 又是访管指令