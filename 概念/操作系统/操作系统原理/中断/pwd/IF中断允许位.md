---
aliases:
  - IF
  - 中断允许位
---
> **Summary：**
> IF 是 CPU 用来控制是否响应可屏蔽硬件中断的标志位，只对外部中断有效，对异常和系统调用无效
### 物理位置：
是 [[PSW程序状态字寄存器|PSW]] 中的 1 个标志位
### 作用：
- 是否响应可屏蔽中断

| IF 值       | 含义                          |
| ---------- | --------------------------- |
| **IF = 1** | ✅ 允许响应外部可屏蔽中断（比如时钟中断、IO 中断） |
| **IF = 0** | ❌ 屏蔽外部可屏蔽中断                 |
**注意：**
- **不可屏蔽中断（NMI）**：IF 管不了
- **异常 / Trap（除零、缺页、系统调用）**：IF 也管不了
- 修改 IF 是 **特权操作**，只能在内核态执行
### 工作流程：
当 CPU **响应一次中断** 时：
1. 自动保存现场（EIP、CS、EFLAGS）
2. **自动把 IF 清 0**
3. 进入中断服务程序
4. 等中断处理结束，`IRET`；
	- 恢复 EFLAGS
	- IF 回到原来的值
- 目的：防止中断嵌套把内核搞炸