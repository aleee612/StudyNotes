---
aliases:
  - 进程通信
  - IPC
---
---
**Summary：** 

| 方式     | 是否传数据 | 是否同步 | 速度   | 适用场景   |
| ------ | ----- | ---- | ---- | ------ |
| 管道     | ✔     | 否    | 中    | 简单父子进程 |
| 消息队列   | ✔     | 否    | 中    | 结构化通信  |
| 共享内存   | ✔     | 否    | ⭐⭐⭐⭐ | 大量高速数据 |
| 信号量    | ✘     | ✔    | 快    | 同步互斥   |
| 信号     | ✘     | 否    | 快    | 事件通知   |
| Socket | ✔     | 否    | 较慢   | 网络/通用  |
> 进程通信需要系统调用是因为要**内存隔离**
---
## 通信方式
### 管道（Pipe）
**特点**：
- 半双工（单向）
- 常用进程：父进程与子进程
- 基于文件描述符
**分类**：
- **匿名管道**：父子进程
- **命名管道（FIFO）**：无亲缘也能用
**优点**：
- 简单
**缺点**：
- 只能流式、无结构、效率一般
- ---
### 消息队列（Message Queue）
**核心思想**：
不直接传数据流，而是一条一条**消息**
**特点**：
- 消息有**边界**
- 可按类型接收
- **异步通信**
**优点**：
- 结构化、解耦
**缺点**：
- 内核态维护，性能一般
考研重点：
> **消息 = 消息头 + 消息体**
---
### 共享内存（Shared Memory）
**最快的 IPC，没有之一**
**原理**：
- 多个进程映射同一块物理内存
- 读写不经内核（建立时除外）
**必须配合同步机制**
通常搭配：
- 信号量
- 互斥锁
**优点**：
- 速度最快
**缺点**：
- 编程复杂，容易写出“事故现场”
- ---
### 信号量（Semaphore）
**它不是用来传数据的！**
**作用**：
- 进程同步
- 互斥访问共享资源
**典型用途**：
- 保护共享内存
- 生产者-消费者问题
> **信号量 = 门口保安**
- ---
### 信号（Signal）
**特点**：
- 异步
- 只能传“事件”，不能传大量数据
**用途**：
- 通知进程某事发生了
**常见信号**：
- `SIGKILL`：直接干掉
- `SIGINT`：Ctrl+C
- `SIGALRM`：定时器
- ---
### 套接字（Socket）
**最通用的 IPC**
**特点**：
- 可用于：
    - 同一台机器
    - 不同机器（网络通信）
- 客户端 / 服务器模型