### ARQ 可靠数据传输协议
作用：通过ACK和重传实现可靠通信
- 发送方在发送数据后，必须等待接收方的确认（ACK）
- 如果在规定时间内没有收到确认，就认为数据丢失或出错，需要重传

| **协议**           | **确认方式** | 核心思想                          | 重发条件           |
| ---------------- | -------- | ----------------------------- | -------------- |
| **停止-等待 (S-W)**  | 逐个确认     | 只有在收到确认后                      | 未收到ACK         |
| **回退 N 帧 (GBN)** | **累积确认** | 发送的帧数不超过发送窗口的大小，通过滑动窗口实现累计ACK | 超时，收到的ACK的最后一位 |
| **选择重传 (SR)**    | 逐个确认     | 比起回退N，只重传那些真正丢失或出错的帧          | 缺收的ACK         |
### 窗口大小限制
$发送窗口大小+接收窗口大小≤2^n$ 
### 信道利用率
$信道利用率 = \frac{\text{实际发送的帧数}}{\text{理论能发的帧数}}$ 
最大平均数据传输速率 = 理论带宽 $\times$ 利用率
### 错题
> 两台主机之间的数据链路层采用后退 N 帧协议 (GBN) 传输数据，数据传输速率为 16 kbps，单向传播时延为 270 ms，数据帧长度范围是 128~512 字节，接收方总是以与数据帧等长的帧进行确认。为使信道利用率达到最高，帧序号的比特数至少为（ ）。
    A.5         B.4         C.3         D.2
- 计算帧序号比特数最少为多少，则为计算帧在一次传播中最多可一次性发送多少
- 可得当长度为 128B 时，传输为 64ms ，则总时间为 64+270+64(接收方总是以与数据帧等长的帧进行确认) = 668ms
- 一次性可发送帧数为 668/64=10.4 < 16，故为4位
> 假设通过同一信道，数据链路层分别采用停等协议、GBN 协议和 SR 协议（发送窗口和接收窗口相等）传输数据，三个协议数据帧长相同，忽略确认帧长度，帧序号位数为 3 比特。若对应三个协议的发送方最大信道利用率分别是 U1、U2 和 U3，则 U1、U2 和 U3 满足的关系是（ ）
	A.U1 ≤ U2 ≤ U3      B.U1 ≤ U3 ≤ U2      C.U2 ≤ U3 ≤ U1      D.U3 ≤ U2 ≤ U1
- 停等协议规定：发送窗口大小固定为 $W_1 = 1$ 
- 后退 N 帧协议 (GBN)规定：$W_T \le 2^n - 1$  = 7
- 选择重传协议 (SR)规定：题目要求发送窗口 = 接收窗口，则 $W_T + W_R \le 2^n$ = 4
- **逻辑点：** 在不丢包的前提下，谁的**发送窗口开得大**，谁的利用率就高