7. 跨域问题怎么解决？
跨域是由浏览器的 同源策略 引起的一种安全限制。 由浏览器实施的一套规则。它规定了：一个源（Origin）(当协议，域名，端口完全相同的时候才是同源）的文档（网页）或脚本，在没有明确授权的情况下，不能与另一个源的资源进行交互。假设原始页面来自 https://www.example.com,不能用 JavaScript 直接向 https://api.another-domain.com 发起 XMLHttpRequest 或 Fetch 请求并读取响应。 阻碍的是 一个源的文档或脚本，去读取另一个源加载来的资源的 内容浏览器拦截并拒绝JavaScript 代码读取该请求的响应内容。会得到一个网络错误，但在开发者工具的 Network 面板中，能看到这个请求已经发出并且服务器也返回了响应，只是代码拿不到。 解决方案：

后端解决方案（最常用）： CORS（跨域资源共享）全称为 Cross-Origin Resource Sharing。允许服务器明确地指示浏览器，哪些外部源（域、协议、端口）有权访问该服务器的资源。

CORS (跨域资源共享)：这是最标准、最推荐的解决方案。在后端服务器的响应头中添加特定的字段。
在Spring项目中，可以使用 @CrossOrigin 注解在Controller类或方法上。
也可以配置一个全局的 WebMvcConfigurer Bean，来统一处理。
1
2
3
4
5
6
7
8
9
10
@Configuration
public class CorsConfig implements WebMvcConfigurer {
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/**")
                .allowedOrigins("http://localhost:8080") // 允许的源
                .allowedMethods("GET", "POST", "PUT", "DELETE") // 允许的方法
                .allowCredentials(true); // 允许携带Cookie
    }
}
网关/代理层解决方案：

在Nginx等网关或代理服务器中配置反向代理，将前端和后端的请求代理到同一个域下，从而避免跨域。
回答： “我们项目中使用的是最标准的 CORS（跨域资源共享） 方案。在基于Spring Boot的后端项目中，我们通过一个全局配置类，统一设置了允许跨域的源、方法。这种方式对代码侵入性小，且能很好地解决问题。